version: '2'
services:
    testphp:
        extends:
            file: ../docker-compose.dev.yml
            service: app
        volumes:
            - ./../:/var/www/html/
        env_file: ./../.env

    testdb:
        extends:
            file: ../docker-compose.dev.yml
            service: db
        environment:
            MYSQL_ROOT_PASSWORD: ""
            MYSQL_ALLOW_EMPTY_PASSWORD: "yes"
            MYSQL_DATABASE: "ely_accounts_test"
            MYSQL_USER: "ely_accounts_tester"
            MYSQL_PASSWORD: "ely_accounts_tester_password"

    testredis:
        extends:
            file: ../docker-compose.dev.yml
            service: redis

    testrabbit:
        extends:
            file: ../docker-compose.dev.yml
            service: rabbitmq
        environment:
            RABBITMQ_DEFAULT_USER: "ely-accounts-tester"
            RABBITMQ_DEFAULT_PASS: "tester-password"
            RABBITMQ_DEFAULT_VHOST: "/account.ely.by/tests"
